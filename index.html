<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sauna Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin:0; padding:0; }

        body {
            font-family: 'Poppins', 'Inter', system-ui, sans-serif;
            margin: 0;
            padding: 40px 20px;
            background-image: url('sauna-bg.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #F8F3E8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1, h2 { color: #FFF6E8; font-weight: 600; }

        h1 {
            font-size: 2.6rem;
            text-align: center;
            letter-spacing: 0.08em;
            margin-bottom: 24px;
            text-shadow: 0 2px 6px rgba(0,0,0,0.6);
        }

        h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        section {
            background: rgba(0, 0, 0, 0.35);
            backdrop-filter: blur(3px);
            -webkit-backdrop-filter: blur(3px);
            border-radius: 12px;
            padding: 24px;
            margin: 0 auto 32px auto;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            max-width: 780px;
            width: 100%;
        }

        /* Date row */
        .date-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }

        label { font-weight: 500; margin-right: 4px; }

        input[type="date"] {
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            background: rgba(255,255,255,0.15);
            color: #FFF6E8;
        }

        p { margin: 12px 0; font-size: 1.1rem; }
        #totalTime { font-size: 2rem; font-weight: 600; color: #FFF6E8; }

        /* Prominent timer pill */
        #timerBox {
            text-align: center;
            margin: 24px auto 32px auto;
            background: rgba(0, 0, 0, 0.45);
            border-radius: 999px;
            padding: 14px 26px;
            display: inline-block;
            min-width: 260px;
            border: 1px solid rgba(245, 215, 124, 0.4);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
        }

        #sessionTimer {
            font-size: 1.8rem;
            font-weight: 700;
            color: #F5D77C;
            letter-spacing: 0.06em;
            margin: 0;
        }

        #sessionTimer.running {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { text-shadow: 0 0 8px rgba(245, 215, 124, 0.4); }
            50% { text-shadow: 0 0 16px rgba(245, 215, 124, 0.8); }
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 20px 0;
            justify-content: center;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 999px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
            min-width: 140px;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.35);
            filter: brightness(1.08);
        }

        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
        }

        #startBtn   { background: #D4AF37; color: #1E1E1E; }
        #stopBtn    { background: #1E1E1E; color: #D4AF37; border: 1px solid #D4AF37; }
        #submitDay  { background: #D4AF37; color: white; }
        #loadDate,
        #showWeekly,
        #showMonthly { background: #1E1E1E; color: #D4AF37; border: 1px solid rgba(212, 175, 55, 0.4); }

        #benefits {
            background: rgba(0, 0, 0, 0.45);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        #benefitsText { font-size: 1.1rem; line-height: 1.6; }

        .entry {
            background: rgba(255, 255, 255, 0.1);
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
        }

        .entry button {
            min-width: auto;
            padding: 6px 12px;
            font-size: 0.9rem;
        }

        hr {
            border: none;
            height: 1px;
            margin: 12px auto 32px auto;
            max-width: 780px;
            width: 100%;
            background: linear-gradient(
                to right,
                transparent,
                rgba(255,255,255,0.18),
                transparent
            );
        }

        #summary {
            margin-top: 16px;
            font-style: italic;
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 8px;
        }

        /* Mobile tweaks */
        @media (max-width: 600px) {
            body {
                padding: 24px 12px;
            }

            section {
                padding: 18px 16px;
            }

            button {
                width: 100%;
                min-width: 0;
            }

            #timerBox {
                margin: 18px auto 24px auto;
                min-width: 0;
                width: 100%;
            }

            .date-row {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <h1>Sauna Tracker</h1>

    <section id="tracker">
        <h2>Track Your Sauna Sessions</h2>

        <div class="date-row">
            <label for="datePicker">Pick a Date:</label>
            <input type="date" id="datePicker">
            <button id="loadDate">Load</button>
        </div>

        <p>Total Time Today: <span id="totalTime">0</span> minutes</p>

        <div id="timerBox">
            <p id="sessionTimer">Current Session: 00:00</p>
        </div>

        <div class="btn-group">
            <button id="startBtn">Start Session</button>
            <button id="stopBtn" disabled>Stop Session</button>
            <button id="submitDay">Submit Day & View Benefits</button>
        </div>
    </section>

    <section id="benefits" style="display: none;">
        <h2>Your Benefits Today</h2>
        <p id="benefitsText"></p>
    </section>

    <hr>

    <section id="history">
        <h2>Session History</h2>
        <div id="historyList"></div>
        <div class="btn-group">
            <button id="showWeekly">Weekly Summary</button>
            <button id="showMonthly">Monthly Summary</button>
        </div>
        <div id="summary"></div>
    </section>

    <script>
        let currentDate = new Date().toISOString().split('T')[0];
        let totalTime = 0;
        let startTime = null;
        let timerInterval = null;
        let sessionSeconds = 0;
        let data = JSON.parse(localStorage.getItem('saunaData')) || {};

        const datePicker = document.getElementById('datePicker');
        datePicker.value = currentDate;

        const totalDisplay = document.getElementById('totalTime');
        const sessionTimer = document.getElementById('sessionTimer');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const submitBtn = document.getElementById('submitDay');
        const benefitsSection = document.getElementById('benefits');
        const benefitsText = document.getElementById('benefitsText');
        const historyList = document.getElementById('historyList');
        const summaryDiv = document.getElementById('summary');
        const loadDateBtn = document.getElementById('loadDate');
        const showWeeklyBtn = document.getElementById('showWeekly');
        const showMonthlyBtn = document.getElementById('showMonthly');

        function loadDateData(date) {
            currentDate = date;
            totalTime = data[date] || 0;
            totalDisplay.textContent = totalTime;
            benefitsSection.style.display = 'none';
            startBtn.disabled = false;
            stopBtn.disabled = true;
            sessionTimer.style.display = 'block';
            sessionTimer.textContent = 'Current Session: 00:00';
            sessionTimer.classList.remove('running');
            sessionSeconds = 0;
            renderHistory();
        }

        loadDateBtn.addEventListener('click', () => {
            const selectedDate = datePicker.value;
            if (selectedDate) loadDateData(selectedDate);
        });

        startBtn.addEventListener('click', () => {
            startTime = Date.now();
            sessionSeconds = 0;
            sessionTimer.classList.add('running');        // glow animation on
            timerInterval = setInterval(() => {
                sessionSeconds++;
                const mins = Math.floor(sessionSeconds / 60).toString().padStart(2, '0');
                const secs = (sessionSeconds % 60).toString().padStart(2, '0');
                sessionTimer.textContent = `Current Session: ${mins}:${secs}`;
            }, 1000);
            startBtn.disabled = true;
            stopBtn.disabled = false;
        });

        stopBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            sessionTimer.classList.remove('running');     // glow animation off
            const sessionTime = Math.round((Date.now() - startTime) / 60000);
            totalTime += sessionTime;
            totalDisplay.textContent = totalTime;
            startBtn.disabled = false;
            stopBtn.disabled = true;
        });

        submitBtn.addEventListener('click', () => {
            if (totalTime > 0) {
                data[currentDate] = totalTime;
                localStorage.setItem('saunaData', JSON.stringify(data));
                showBenefits(totalTime);
                renderHistory();
            } else {
                alert('Add some time first!');
            }
        });

        function showBenefits(minutes) {
            let benefits = '';
            if (minutes < 10) {
                benefits = `Nice quick session! You got some basic relaxation and a bit of detox. Keep it up for more perks.`;
            } else if (minutes < 20) {
                benefits = `Solid effort! This helps with stress relief, better circulation, and muscle recovery. Aim for 15-20 min often for heart health.`;
            } else {
                benefits = `Awesome long session! Big wins for cardiovascular health, reduced inflammation, and even lower risk of heart issues with regular use. Don't overdo it though—stay hydrated!`;
            }
            benefitsText.textContent = benefits;
            benefitsSection.style.display = 'block';
        }

        function renderHistory() {
            historyList.innerHTML = '';
            Object.keys(data).sort().reverse().forEach(date => {
                const entry = document.createElement('div');
                entry.className = 'entry';
                entry.innerHTML = `
                    <span>${date}: ${data[date]} min</span>
                    <div>
                        <button onclick="editEntry('${date}')">Edit</button>
                        <button onclick="deleteEntry('${date}')">Delete</button>
                    </div>
                `;
                historyList.appendChild(entry);
            });
        }

        window.editEntry = function(date) {
            const newTime = prompt(`Edit time for ${date} (minutes):`, data[date]);
            if (newTime !== null && !isNaN(newTime) && newTime >= 0) {
                data[date] = parseInt(newTime);
                localStorage.setItem('saunaData', JSON.stringify(data));
                renderHistory();
                if (date === currentDate) {
                    totalTime = data[date];
                    totalDisplay.textContent = totalTime;
                }
            }
        }

        window.deleteEntry = function(date) {
            if (confirm(`Delete ${date}?`)) {
                delete data[date];
                localStorage.setItem('saunaData', JSON.stringify(data));
                renderHistory();
            }
        }

        showWeeklyBtn.addEventListener('click', () => {
            const today = new Date();
            let weeklyTotal = 0, days = 0;
            for (let i = 0; i < 7; i++) {
                const d = new Date(today);
                d.setDate(today.getDate() - i);
                const ds = d.toISOString().split('T')[0];
                if (data[ds]) { weeklyTotal += data[ds]; days++; }
            }
            summaryDiv.innerHTML = `Weekly total (last 7 days): ${weeklyTotal} min over ${days} days — Average: ${days > 0 ? (weeklyTotal/days).toFixed(1) : 0} min/day`;
        });

        showMonthlyBtn.addEventListener('click', () => {
            const today = new Date();
            const month = today.getMonth(), year = today.getFullYear();
            let monthlyTotal = 0, days = 0;
            Object.keys(data).forEach(date => {
                const d = new Date(date);
                if (d.getMonth() === month && d.getFullYear() === year) {
                    monthlyTotal += data[date];
                    days++;
                }
            });
            summaryDiv.innerHTML = `Monthly total: ${monthlyTotal} min over ${days} days — Average: ${days > 0 ? (monthlyTotal/days).toFixed(1) : 0} min/day`;
        });

        loadDateData(currentDate);
        renderHistory();
    </script>
</body>
</html>
